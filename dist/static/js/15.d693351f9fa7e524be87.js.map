{"version":3,"sources":["webpack:///src/components/icbc/relationShow.vue","webpack:///./src/components/icbc/relationShow.vue?8bc4","webpack:///./src/components/icbc/relationShow.vue"],"names":["relationShow","_name$components$prop","store","props","created","nodeId","defineProperty_default","nodeChangeCount","nodeNo","b","currentLevel","setBox","length","c","count","pChildCount","topMargin","pParentNo","this","rBox","h","pWidth","t","w","l","y1","pBox","x1","y2","x2","nodeSelect","name","showNode","newVal","icbc_relationShow","render","_vm","_h","$createElement","_c","_self","on","click","$event","staticStyle","fill","stroke","stroke-width","opacity","attrs","x","y","rx","ry","width","height","_v","tBox","font-size","_s","nodeName","d","sPath","_l","childNodeId","index","key","node-id","current-level","NextLevel","parent-id","parent-rect","node-no","node-type","nodeType","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"+IAoCAA,GAAAC,QACA,2BACAC,QAAA,SACAC,cAEA,YACA,cACA,kBAEA,gBACA,cAEA,MACAC,QAAA,gEAMA,uBACA,UAEA,SACA,mEAMA,uDAMAC,UAEAC,IAAAL,EAAA,qBAGA,yBAEA,+CAEAM,mFACAC,2DACAC,GAEAA,aAEA,qDAEAC,gCACA,KAdAJ,IAAAL,EAAA,WAoBAU,OAAA,gCAGAC,wBACAA,uBAEAC,uBACA,IACA,oBAGAL,mBACAM,8BAEA,QACAC,IAAAC,GAAAC,EAAA,GAAAF,IAAAG,KAAAC,KAAAC,EANA,IAQAJ,wDAEAK,4CAVA,IAWAL,qCACAM,2BACA,0BACA,eACA,2BAEA,yCACA,2CACAC,4CACAH,iBACAI,gCAEAJ,4BACAK,GAAA,OAAAC,EAAAC,GAAA,GAAAT,KAAAG,QAAA,KAAAK,EAAAD,GAAA,IAAAC,EAAAE,GAAAF,EACAD,KAAA,KAAAC,EAAAC,GAAA,IAAAD,EAAAG,GAAAH,EAAAC,KAAA,IAAAD,EACAE,GAAA,IAAAF,EAAAG,GAAA,IAAAH,EAIAE,IAKAE,WAAA,yBAEA,8BACAvB,yFACAC,+BAEAH,mDAGAA,qDAEA0B,6CACA,wDACA,wEAGA,EAAAb,KAAAc,UACA,OACArB,aA/DAL,IAAAL,EAAA,0CAsEAgC,MAFAhC,GC/JAiC,GADiBC,OAFjB,WAA0B,IAAAC,EAAAlB,KAAamB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,KAAAA,EAAA,KAAuBE,IAAIC,MAAA,SAAAC,GAAyB,OAAAP,EAAAN,iBAA0BS,EAAA,QAAaK,aAAaC,KAAA,MAAAC,OAAA,QAAAC,eAAA,IAAAC,QAAA,OAAiEC,OAAQC,EAAAd,EAAAjB,KAAAK,EAAA2B,EAAAf,EAAAjB,KAAAG,EAAA8B,GAAA,IAAAC,GAAA,IAAAC,MAAAlB,EAAAjB,KAAAI,EAAAgC,OAAAnB,EAAAjB,KAAAC,KAAwFgB,EAAAoB,GAAA,KAAAjB,EAAA,QAAyBU,OAAOC,EAAAd,EAAAqB,KAAAjC,EAAA2B,EAAAf,EAAAqB,KAAAnC,EAAAoC,YAAA,QAAgDtB,EAAAoB,GAAApB,EAAAuB,GAAAvB,EAAAwB,eAAAxB,EAAAoB,GAAA,KAAAjB,EAAA,QAA0DU,OAAOY,EAAAzB,EAAA0B,MAAAhB,OAAA,QAAAD,KAAA,iBAAqDT,EAAAoB,GAAA,KAAApB,EAAA2B,GAAA3B,EAAA,mBAAA4B,EAAAC,GAAiE,OAAA7B,EAAA,SAAAG,EAAA,iBAA0C2B,IAAAD,EAAAhB,OAAiBkB,UAAAH,EAAAI,gBAAAhC,EAAAiC,UAAAC,YAAAlC,EAAA/B,OAAAkE,cAAAnC,EAAAjB,KAAAqD,UAAAP,EAAAQ,YAAArC,EAAAsC,YAA4ItC,EAAAuC,QAAW,IAE1yBC,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACA/E,EACAkC,GATA,EAVA,SAAA8C,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/15.d693351f9fa7e524be87.js","sourcesContent":["<template>\n\n  <g>\n\n\n    <a @click=\"nodeSelect()\">\n\n      <rect :x=\"rBox.l\" :y=\"rBox.t\" rx=\"5\" ry=\"5\" :width=\"rBox.w\"\n            :height=\"rBox.h\" style=\"fill:red;stroke:black;\n                      stroke-width:2;opacity:0.5\"/>\n\n      <text :x=\"tBox.l \" :y=\"tBox.t\" font-size=\"12\">{{nodeName }}</text>\n    </a>\n\n      <path :d=\"sPath\" stroke=\"black\" fill=\"transparent\"/>\n    <relation-show v-if=\"ShowNode\"  v-for=\"(childNodeId, index) in childList\"\n                     :key=\"index\"\n                     :node-id=\"childNodeId\"\n                     :current-level=\"NextLevel\"\n                     :parent-id=\"nodeId\"\n                     :parent-rect = \"rBox\"\n                     :node-no=\"index\"\n                     :node-type =\"nodeType\">\n  </relation-show>\n\n\n  </g>\n\n</template>\n\n<script>\n\n  import store from '../../store/index'\n\n  export default {\n\n    name: \"relationShow\",\n    components: {store},\n    props:\n      {\n        nodeNo: null,\n        nodeId:null,\n        parentId:null,\n        currentLevel:null,\n\n        parentRect:null,\n        nodeType:null\n      },\n    created()\n    {},\n\n    data() {\n      return {\n\n        rBox:{l: 0, t: 0, w: 0, h: 0,n:0,c:0},\n        tBox:{l: 0, t: 0, w: 0, h: 0},\n        //showNode:false,\n        pWidth :40,\n        sPath: \"M30 300 C 50 310, 40 10, 80 10\",\n        nodeInfo:{},\n        childList: [],\n        nodeName:\"\",\n\n      }\n\n    },\n    created()\n    {\n\n      this.getNodeInfo(this.nodeId)\n\n    },\n    computed:\n      {\n\n        ShowNode:function()\n        {\n            console.debug(\"ShowNode wwwwwwwwwwwwwwwwww\");\n            let a = store.state.nodeChangeCount ;\n\n            let b = store.getters[\"icbc/getShowFlag\"](this.currentLevel,this.nodeNo);\n            console.debug(this.currentLevel,this.nodeNo,b)\n            return b;\n\n        },\n        NextLevel: function()\n        {\n          console.debug(\"currentLelel:\" + this.currentLevel)\n          return this.currentLevel+1;\n        }\n      },\n    methods:\n      {\n\n        setBox()\n        {\n\n          let count = this.childList.length;\n          let len = this.nodeName.length;\n          //if(len>15) len = 15;\n          let pChildCount = this.parentRect.c\n          let pParentNo = this.parentRect.n +1\n          let topMargin = 40\n          let splitH = 10;\n          let hight = 25\n          this.rBox.n = this.nodeNo\n          this.rBox.c = count\n          this.rBox.w = 15 *14\n          this.rBox.h = 25\n         if(pParentNo>0.5*pChildCount)\n            topMargin = (pParentNo - 0.5*pChildCount)*(this.rBox.h + splitH) + topMargin\n\n          this.rBox.l = this.parentRect.l+ this.parentRect.w + this.pWidth;\n\n          this.rBox.t = this.nodeNo* (this.rBox.h +splitH)  +topMargin;\n          if(pChildCount==1) this.rBox.t = this.parentRect.t;\n          this.tBox.l = this.rBox.l +6;\n          this.tBox.t = this.rBox.t +16;\n          this.tBox.w = this.rBox.w *0.8;\n          this.tBox.h = this.rBox.h *0.8\n\n          let pBox = {x1: 0, y1: 0, x2: 40, y2: 40};\n          pBox.x1 = this.parentRect.l + this.parentRect.w\n          pBox.y1 = this.parentRect.t + 0.5* this.parentRect.h\n          pBox.x2 = this.rBox.l\n          pBox.y2 = this.rBox.t +  0.5* this.rBox.h\n\n          this.sPath = \"M\" + pBox.x1 + \" \" + pBox.y1\n                    + \" C \" + (pBox.x1 +0.5* this.pWidth  ) +\" \" + (pBox.y1 + 0.5* (pBox.y2 - pBox.y1) )\n                    +\",\" + (pBox.x1 + 0.5* (pBox.x2-pBox.x1)) + \" \" + pBox.y2\n                    +\",\" + pBox.x2  + \" \" +pBox.y2;\n\n\n\n           // M30 300 C 50 310, 40 10, 80 10\n\n        },\n\n        nodeSelect()\n        {\n          console.debug(\"nodeSelect\");\n          store.state.nodeChangeCount++;\n          store.commit('icbc/setSelectNode', {level:this.currentLevel, no: this.nodeNo})\n        },\n        getNodeInfo(nodeId)\n        {\n\n          this.nodeInfo = store.getters[\"icbc/getNode\"](nodeId)\n          if(this.nodeInfo==null) return;\n          this.nodeName = this.nodeInfo.name;\n          this.nodeName = this.nodeName.substring(0,14)\n          this.childList = store.getters[\"icbc/getChild\"](nodeId,\"source\")\n        //  this.childList = store.getters[\"icbc/getChild\"](nodeId,this.nodeType)\n\n          if(this.childList==null||this.childList.length==0) this.showNode = false;\n          else this.showNode = true;\n          this.setBox()\n        },\n\n      },\n    watch:\n      {\n        nodeId(newVal, oldVal) {\n          getNodeInfo(newVal)\n        },\n\n\n        },\n\n  }\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/icbc/relationShow.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',[_c('a',{on:{\"click\":function($event){return _vm.nodeSelect()}}},[_c('rect',{staticStyle:{\"fill\":\"red\",\"stroke\":\"black\",\"stroke-width\":\"2\",\"opacity\":\"0.5\"},attrs:{\"x\":_vm.rBox.l,\"y\":_vm.rBox.t,\"rx\":\"5\",\"ry\":\"5\",\"width\":_vm.rBox.w,\"height\":_vm.rBox.h}}),_vm._v(\" \"),_c('text',{attrs:{\"x\":_vm.tBox.l,\"y\":_vm.tBox.t,\"font-size\":\"12\"}},[_vm._v(_vm._s(_vm.nodeName))])]),_vm._v(\" \"),_c('path',{attrs:{\"d\":_vm.sPath,\"stroke\":\"black\",\"fill\":\"transparent\"}}),_vm._v(\" \"),_vm._l((_vm.childList),function(childNodeId,index){return (_vm.ShowNode)?_c('relation-show',{key:index,attrs:{\"node-id\":childNodeId,\"current-level\":_vm.NextLevel,\"parent-id\":_vm.nodeId,\"parent-rect\":_vm.rBox,\"node-no\":index,\"node-type\":_vm.nodeType}}):_vm._e()})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-387ccd2b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/icbc/relationShow.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-387ccd2b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./relationShow.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./relationShow.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./relationShow.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-387ccd2b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./relationShow.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-387ccd2b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/icbc/relationShow.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}